module.exports=(()=>{"use strict";var n={302:function(n,t){var e=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function u(n){try{E(i.next(n))}catch(n){o(n)}}function a(n){try{E(i.throw(n))}catch(n){o(n)}}function E(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,a)}E((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.down=t.up=void 0,t.up=function(n){return e(this,void 0,void 0,(function*(){return n.raw('\n    ALTER TABLE "legalEntities" DROP CONSTRAINT "legalEntitiesOgrnUniqe";\n  ')}))},t.down=function(n){return e(this,void 0,void 0,(function*(){return n.raw('\n    \n    -- remove duplicates\n    DELETE FROM "legalEntities"\n    WHERE id IN \n    (\n      SELECT id\n      FROM (\n        SELECT\n          id,\n          ROW_NUMBER() OVER (partition BY "ogrn" ORDER BY id) AS RowNumber\n        FROM "legalEntities"\n      ) AS T\n      WHERE T.RowNumber > 1\n    );\n    \n    -- add constraint\n    ALTER TABLE "legalEntities" ADD CONSTRAINT "legalEntitiesOgrnUniqe" UNIQUE (ogrn);\n  ')}))}}},t={};return function e(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return n[i].call(r.exports,r,r.exports,e),r.exports}(302)})();