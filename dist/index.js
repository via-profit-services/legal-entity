/*!
 * 
 *  Via Profit services / legal-entity
 * 
 *  Repository https://gitlab.com/via-profit-services/legal-entity
 *  Contact    promo@via-profit.ru
 *  Website    https://via-profit.ru
 *       
 */
module.exports=function(e){var n={};function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=n,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)i.d(t,a,function(n){return e[n]}.bind(null,a));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="",i(i.s=4)}([function(e,n,i){"use strict";var t=this&&this.__awaiter||function(e,n,i,t){return new(i||(i=Promise))((function(a,d){function l(e){try{o(t.next(e))}catch(e){d(e)}}function r(e){try{o(t.throw(e))}catch(e){d(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,r)}o((t=t.apply(e,n||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const d=i(2),l=a(i(1)),r={legalEntities:null,payments:null};n.default=function(e){if(null!==r.legalEntities)return r;const n=new l.default({context:e});return r.legalEntities=new d.DataLoader(e=>t(this,void 0,void 0,(function*(){const i=yield n.getLegalEntitiesByIds(e);return d.collateForDataloader(e,i)}))),r.payments=new d.DataLoader(e=>t(this,void 0,void 0,(function*(){const i=yield n.getLegalEntityPaymentsByIds(e);return d.collateForDataloader(e,i)}))),r}},function(e,n,i){"use strict";var t=this&&this.__awaiter||function(e,n,i,t){return new(i||(i=Promise))((function(a,d){function l(e){try{o(t.next(e))}catch(e){d(e)}}function r(e){try{o(t.throw(e))}catch(e){d(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,r)}o((t=t.apply(e,n||[])).next())}))},a=this&&this.__rest||function(e,n){var i={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(i[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(i[t[a]]=e[t[a]])}return i},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const l=i(2),r=d(i(7)),o=d(i(8)),u=d(i(9)),m=i(3),s=i(10);class y{constructor(e){this.props=e}static getLegalEntityDefaultData(){return{id:m.v4(),createdAt:new Date,updatedAt:new Date,label:"",nameFull:"",nameShort:"",address:"",ogrn:m.v4(),inn:m.v4(),kpp:null,directorNameNominative:"",directorNameGenitive:"",directorNameShortNominative:"",directorNameShortGenitive:"",comment:"",deleted:!1,city:null}}static getLegalEntityPaymentDefaultData(){return{id:m.v4(),owner:m.v4(),createdAt:new Date,updatedAt:new Date,rs:"",ks:"",bic:"",bank:"",comment:"",deleted:!1}}prepareLegalEntityDataToInsert(e){const{timezone:n}=this.props.context;return Object.assign(Object.assign({},e),{updatedAt:o.default.tz(n).format()})}prepareLegalEntityPaymentToInsert(e){const{timezone:n}=this.props.context;return Object.assign(Object.assign({},e),{updatedAt:o.default.tz(n).format()})}getLegalEntities(e){return t(this,void 0,void 0,(function*(){const{context:n}=this.props,{knex:i}=n,{limit:t,offset:d,orderBy:r,where:o,search:u}=e,m=yield i.select([i.raw('"legalEntities".*'),i.raw('count(*) over() as "totalCount"'),i.raw('string_agg(payments."id"::text, \'|\') as "payments"')]).from("legalEntities").limit(t||1).offset(d||0).leftJoin("legalEntitiesPayments as payments",e=>e.on("payments.owner","=","legalEntities.id").onIn("payments.deleted",[!1])).where(e=>l.convertWhereToKnex(e,o,{payments:["bank","bic","rs","ks","owner","priority"],legalEntities:"*"})).where(e=>(u&&u.forEach(({field:n,query:i})=>{i.split(" ").forEach(i=>{e.orWhere(n,l.TWhereAction.ILIKE,`%${i}%`)})}),e)).orderBy(l.convertOrderByToKnex(r)).groupBy("legalEntities.id").then(e=>({totalCount:e.length?Number(e[0].totalCount):0,nodes:e.map(e=>{var{totalCount:n}=e,i=a(e,["totalCount"]);return Object.assign(Object.assign({},i),{city:i.city?{id:i.city}:null,payments:i.payments?l.arrayOfIdsToArrayOfObjectIds(i.payments.split("|")):null})})}));return Object.assign(Object.assign({},m),{offset:d,limit:t,where:o,orderBy:r})}))}getLegalEntitiesByIds(e){return t(this,void 0,void 0,(function*(){const{nodes:n}=yield this.getLegalEntities({where:[["id",l.TWhereAction.IN,e]],offset:0,limit:e.length});return n}))}getLegalEntity(e){return t(this,void 0,void 0,(function*(){const n=yield this.getLegalEntitiesByIds([e]);return!!n.length&&n[0]}))}updateLegalEntity(e,n){return t(this,void 0,void 0,(function*(){const{knex:i,timezone:t}=this.props.context,a=Object.assign(Object.assign({},n),{id:e,updatedAt:o.default.tz(t).format()});return(yield i("legalEntities").update(this.prepareLegalEntityDataToInsert(a)).where("id",e).returning("id"))[0]}))}createLegalEntity(e){return t(this,void 0,void 0,(function*(){const{knex:n,timezone:i}=this.props.context,t=Object.assign(Object.assign({},e),{id:e.id||m.v4(),createdAt:o.default.tz(i).format(),updatedAt:o.default.tz(i).format()});return(yield n("legalEntities").insert(this.prepareLegalEntityDataToInsert(t)).returning("id"))[0]}))}deleteLegalEntity(e){return t(this,void 0,void 0,(function*(){const n=this.updateLegalEntity(e,{inn:m.v4(),ogrn:m.v4(),deleted:!0});return Boolean(n)}))}restoreLegalEntity(e){return t(this,void 0,void 0,(function*(){const n=this.updateLegalEntity(e,{deleted:!1});return Boolean(n)}))}externalSearchCompanies(e){return t(this,void 0,void 0,(function*(){const{context:n}=this.props,{logger:i}=n;try{const n=yield u.default(s.EXTERNAL_SEARCH_API_URL_COMPANIES,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${s.EXTERNAL_SEARCH_API_TOKEN}`},body:JSON.stringify({query:e})}),i=yield n.json();return i&&i.suggestions?i.suggestions.map(e=>{var n,i,t,a,d,l,o,u,m,s,y,p;const c=(null==e?void 0:e.data)||{},v=-1!==String(null===(n=null==c?void 0:c.management)||void 0===n?void 0:n.post).toLowerCase().indexOf("директор")?String(null===(i=null==c?void 0:c.management)||void 0===i?void 0:i.name):"",k=""!==v?v.split(" ").reduce((e,n,i)=>0===i?n:`${e} ${n[0]}.`,""):"",N="RU"===(null===(a=null===(t=null==c?void 0:c.address)||void 0===t?void 0:t.data)||void 0===a?void 0:a.country_iso_code)?r.default.find(e=>{var n,i;return e.ru.toLowerCase()===String(null===(i=null===(n=null==c?void 0:c.address)||void 0===n?void 0:n.data)||void 0===i?void 0:i.city).toLowerCase()}):null;return{label:(null===(d=null==c?void 0:c.name)||void 0===d?void 0:d.short)||"",nameFull:(null===(l=null==c?void 0:c.name)||void 0===l?void 0:l.full_with_opf)||"",nameShort:(null===(o=null==c?void 0:c.name)||void 0===o?void 0:o.short_with_opf)||"",address:(null===(u=null==c?void 0:c.address)||void 0===u?void 0:u.value)||"",ogrn:(null==c?void 0:c.ogrn)||"",kpp:(null==c?void 0:c.kpp)||"",inn:(null==c?void 0:c.inn)||"",city:N?{id:N.id}:null,directorNameNominative:v,directorNameShortNominative:k,state:(null===(m=null==c?void 0:c.state)||void 0===m?void 0:m.status)||"ACTIVE",branchType:(null==c?void 0:c.branch_type)||"MAIN",type:(null==c?void 0:c.type)||"LEGAL",registrationDate:new Date((null===(s=null==c?void 0:c.state)||void 0===s?void 0:s.registration_date)||0),liquidationDate:(null===(y=null==c?void 0:c.state)||void 0===y?void 0:y.liquidation_date)?new Date((null===(p=null==c?void 0:c.state)||void 0===p?void 0:p.liquidation_date)||0):null}}):null}catch(e){return i.server.error(`External API request to ${s.EXTERNAL_SEARCH_API_URL_PAYMENTS} failure`,{err:e}),null}}))}externalSearchPayments(e){return t(this,void 0,void 0,(function*(){const{context:n}=this.props,{logger:i}=n;try{const n=yield u.default(s.EXTERNAL_SEARCH_API_URL_PAYMENTS,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${s.EXTERNAL_SEARCH_API_TOKEN}`},body:JSON.stringify({query:e})}),i=yield n.json();return i&&i.suggestions?i.suggestions.map(e=>{var n;const i=(null==e?void 0:e.data)||{};return Object.assign(Object.assign({},y.getLegalEntityPaymentDefaultData()),{bank:(null===(n=null==i?void 0:i.name)||void 0===n?void 0:n.payment)||"",bic:(null==i?void 0:i.bic)||"",ks:(null==i?void 0:i.correspondent_account)||""})}):null}catch(e){return i.server.error(`External API request to ${s.EXTERNAL_SEARCH_API_URL_PAYMENTS} failure`,{err:e}),null}}))}getLegalEntityPayments(e){return t(this,void 0,void 0,(function*(){const{context:n}=this.props,{knex:i}=n,{limit:t,offset:a,orderBy:d,where:r,search:o}=e,u=yield i.select(["*",i.raw('count(*) over() as "totalCount"')]).from("legalEntitiesPayments").limit(t||1).offset(a||0).where(e=>l.convertWhereToKnex(e,r)).where(e=>(o&&o.forEach(({field:n,query:i})=>{i.split(" ").forEach(i=>{e.orWhere(n,l.TWhereAction.ILIKE,`%${i}%`)})}),e)).orderBy(l.convertOrderByToKnex(d)).then(e=>({totalCount:e.length?Number(e[0].totalCount):0,nodes:e.map(e=>Object.assign(Object.assign({},e),{owner:"string"==typeof e.owner?{id:e.owner}:e.owner}))}));return Object.assign(Object.assign({},u),{offset:a,limit:t,where:r,orderBy:d})}))}getLegalEntityPaymentsByIds(e){return t(this,void 0,void 0,(function*(){const{nodes:n}=yield this.getLegalEntityPayments({where:[["id",l.TWhereAction.IN,e]],offset:0,limit:e.length});return n}))}getLegalEntityPayment(e){return t(this,void 0,void 0,(function*(){const n=yield this.getLegalEntityPaymentsByIds([e]);return!!n.length&&n[0]}))}updateLegalEntityPayment(e,n){return t(this,void 0,void 0,(function*(){const{knex:i,timezone:t}=this.props.context,a=Object.assign(Object.assign({},n),{id:e,updatedAt:o.default.tz(t).format()});return(yield i("legalEntitiesPayments").update(this.prepareLegalEntityPaymentToInsert(a)).where("id",e).returning("id"))[0]}))}createLegalEntityPayment(e){return t(this,void 0,void 0,(function*(){const{knex:n,timezone:i}=this.props.context,t=Object.assign(Object.assign({},e),{id:e.id||m.v4(),createdAt:o.default.tz(i).format(),updatedAt:o.default.tz(i).format()});return(yield n("legalEntitiesPayments").insert(this.prepareLegalEntityPaymentToInsert(t)).returning("id"))[0]}))}deleteLegalEntityPayment(e){return t(this,void 0,void 0,(function*(){const n=this.updateLegalEntityPayment(e,{deleted:!0});return Boolean(n)}))}restoreLegalEntityPayment(e){return t(this,void 0,void 0,(function*(){const n=this.updateLegalEntityPayment(e,{deleted:!1});return Boolean(n)}))}}n.LegalEntitiesService=y,n.default=y},function(e,n){e.exports=require("@via-profit-services/core")},function(e,n){e.exports=require("uuid")},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var i in e)n.hasOwnProperty(i)||(n[i]=e[i])}(i(5))},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var i in e)n.hasOwnProperty(i)||(n[i]=e[i])}(i(6))},function(e,n,i){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n};Object.defineProperty(n,"__esModule",{value:!0});const d=t(i(0));n.loaders=d.default;const l=t(i(11));n.resolvers=l.default;const r=a(i(17));n.typeDefs=r;const o=t(i(1));n.LegalEntity=o.default},function(e,n){e.exports=require("@via-profit-services/geography/dist/countries/RU/cities.json")},function(e,n){e.exports=require("moment-timezone")},function(e,n){e.exports=require("node-fetch")},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EXTERNAL_SEARCH_API_URL_COMPANIES="https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party",n.EXTERNAL_SEARCH_API_URL_PAYMENTS="https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/bank",n.EXTERNAL_SEARCH_API_TOKEN="ce019a9bce9004fdf49dc5e103b556634613b042"},function(e,n,i){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const a=t(i(12)),d=t(i(13)),l=t(i(14)),r=t(i(15)),o=t(i(16)),u={Query:{legalEntities:()=>({})},Mutation:{legalEntities:()=>({})},LegalEntity:l.default,LegalEntitiesQuery:d.default,LegalEntityExternalSearch:r.default,LegalEntitiesMutation:a.default,LegalEntityPayments:o.default};n.default=u},function(e,n,i){"use strict";var t=this&&this.__awaiter||function(e,n,i,t){return new(i||(i=Promise))((function(a,d){function l(e){try{o(t.next(e))}catch(e){d(e)}}function r(e){try{o(t.throw(e))}catch(e){d(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,r)}o((t=t.apply(e,n||[])).next())}))},a=this&&this.__rest||function(e,n){var i={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(i[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(i[t[a]]=e[t[a]])}return i},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const l=i(2),r=i(3),o=d(i(0)),u=d(i(1));n.legalEntityMutationResolver={update:(e,n,i)=>t(void 0,void 0,void 0,(function*(){const{id:e,input:d}=n,{payments:r}=d,m=a(d,["payments"]),s=o.default(i),y=new u.default({context:i});if(d.inn){const{nodes:n}=yield y.getLegalEntities({limit:1,where:[["inn",l.TWhereAction.EQ,d.inn],["id",l.TWhereAction.NEQ,e]]});if(n.length&&n[0].id!==e)throw new l.ServerError(`Legal entity record already exists with inn ${d.inn} value`,{id:e,input:d})}if(d.ogrn){const{nodes:n}=yield y.getLegalEntities({limit:1,where:[["ogrn",l.TWhereAction.EQ,d.ogrn],["id",l.TWhereAction.NEQ,e]]});if(n.length&&n[0].id!==e)throw new l.ServerError(`Legal entity record already exists with ogrn ${d.ogrn} value`,{id:e,input:d})}try{yield y.updateLegalEntity(e,m)}catch(n){throw new l.ServerError("Failed to update legal entity",{err:n,id:e,input:d})}const p=[];if(r&&Array.isArray(r)){const n=yield s.legalEntities.load(e);yield r.reduce((n,i)=>t(void 0,void 0,void 0,(function*(){yield n;const t=u.default.getLegalEntityPaymentDefaultData(),a=yield s.payments.load(i.id||t.id),d=Object.assign(Object.assign(Object.assign({},i.id?{}:t),i),{owner:e});if(p.push(d.id),s.payments.clear(d.id),a)try{yield y.updateLegalEntityPayment(d.id,d)}catch(e){throw new l.ServerError("Failed to update legal entity payments",{err:e})}else try{yield y.createLegalEntityPayment(d)}catch(e){throw new l.ServerError("Failed to create legal entity payments",{err:e})}})),Promise.resolve());const i=n.payments.map(e=>e.id).filter(e=>!p.includes(e));try{yield Promise.all(i.map(e=>(s.payments.clear(e),y.deleteLegalEntityPayment(e))))}catch(e){throw new l.ServerError("Failed to remove old payments of this legal entity",{err:e})}}return s.legalEntities.clear(e),{id:e}})),create:(e,n,i)=>t(void 0,void 0,void 0,(function*(){const{input:e}=n,{payments:d}=e,o=a(e,["payments"]),m=e.id||r.v4(),s=new u.default({context:i});if(e.inn){const{totalCount:n}=yield s.getLegalEntities({limit:1,where:[["inn",l.TWhereAction.EQ,e.inn]]});if(n)throw new l.ServerError(`Legal entity record already exists with inn ${e.inn} value`,{input:e})}if(e.ogrn){const{totalCount:n}=yield s.getLegalEntities({limit:1,where:[["ogrn",l.TWhereAction.EQ,e.ogrn]]});if(n)throw new l.ServerError(`Legal entity record already exists with ogrn ${e.ogrn} value`,{input:e})}try{yield s.createLegalEntity(Object.assign(Object.assign(Object.assign({},u.default.getLegalEntityDefaultData()),o),{id:m}))}catch(n){throw new l.ServerError("Failed to create legal entity",{err:n,input:e})}try{yield d.reduce((e,n)=>t(void 0,void 0,void 0,(function*(){yield e;try{yield s.createLegalEntityPayment(Object.assign(Object.assign(Object.assign({},u.default.getLegalEntityPaymentDefaultData()),n),{owner:m}))}catch(e){throw new l.ServerError("Failed to create legal entity payments",{err:e})}})),Promise.resolve())}catch(n){throw new l.ServerError("Failed to create legal entity payments",{err:n,input:e})}return{id:m}})),delete:(e,n,i)=>t(void 0,void 0,void 0,(function*(){const{id:e,ids:a}=n,{logger:d,token:r}=i,m=new u.default({context:i}),s=o.default(i),y=[].concat(a||[]).concat(e?[e]:[]);return yield y.reduce((e,n)=>t(void 0,void 0,void 0,(function*(){yield e;try{m.deleteLegalEntity(n),s.legalEntities.clear(n),d.server.debug(`Legal entity with id ${n} was deleted`,{id:n,uuid:r.uuid})}catch(e){throw new l.ServerError("Failed to delete legal entity",{err:e,id:n})}})),Promise.resolve()),!0}))},n.default=n.legalEntityMutationResolver},function(e,n,i){"use strict";var t=this&&this.__awaiter||function(e,n,i,t){return new(i||(i=Promise))((function(a,d){function l(e){try{o(t.next(e))}catch(e){d(e)}}function r(e){try{o(t.throw(e))}catch(e){d(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,r)}o((t=t.apply(e,n||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const d=i(2),l=a(i(0)),r=a(i(1));n.queryResolver={list:(e,n,i)=>t(void 0,void 0,void 0,(function*(){const e=d.buildQueryFilter(n),t=new r.default({context:i}),a=l.default(i);e.where.push(["deleted",d.TWhereAction.EQ,!1]);try{const n=yield t.getLegalEntities(e),i=d.buildCursorConnection(n,"legalEntities");return n.nodes.forEach(e=>{a.legalEntities.clear(e.id).prime(e.id,e)}),i}catch(e){throw new d.ServerError("Failed to get LegalEntities list",{err:e})}})),get:(e,n,i)=>t(void 0,void 0,void 0,(function*(){const{id:e}=n,t=l.default(i);return(yield t.legalEntities.load(e))||null})),externalSearch:(e,n)=>n},n.default=n.queryResolver},function(e,n,i){"use strict";var t=this&&this.__awaiter||function(e,n,i,t){return new(i||(i=Promise))((function(a,d){function l(e){try{o(t.next(e))}catch(e){d(e)}}function r(e){try{o(t.throw(e))}catch(e){d(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,r)}o((t=t.apply(e,n||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const d=a(i(0));n.legalEntityResolver=new Proxy({id:()=>({}),createdAt:()=>({}),updatedAt:()=>({}),label:()=>({}),nameFull:()=>({}),nameShort:()=>({}),address:()=>({}),ogrn:()=>({}),kpp:()=>({}),inn:()=>({}),directorNameNominative:()=>({}),directorNameGenitive:()=>({}),directorNameShortNominative:()=>({}),directorNameShortGenitive:()=>({}),comment:()=>({}),payments:()=>({}),city:()=>({}),deleted:()=>({})},{get:(e,n)=>(e,i,a)=>t(void 0,void 0,void 0,(function*(){const{id:i}=e,t=d.default(a);return(yield t.legalEntities.load(i))[n]}))}),n.default=n.legalEntityResolver},function(e,n,i){"use strict";var t=this&&this.__awaiter||function(e,n,i,t){return new(i||(i=Promise))((function(a,d){function l(e){try{o(t.next(e))}catch(e){d(e)}}function r(e){try{o(t.throw(e))}catch(e){d(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,r)}o((t=t.apply(e,n||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const d=a(i(1));n.legalEntityExternalSearchResolver={companies:(e,n,i)=>t(void 0,void 0,void 0,(function*(){const{query:e}=n,t=new d.default({context:i});return yield t.externalSearchCompanies(e)})),payments:(e,n,i)=>t(void 0,void 0,void 0,(function*(){const{query:e}=n,t=new d.default({context:i});return yield t.externalSearchPayments(e)}))},n.default=n.legalEntityExternalSearchResolver},function(e,n,i){"use strict";var t=this&&this.__awaiter||function(e,n,i,t){return new(i||(i=Promise))((function(a,d){function l(e){try{o(t.next(e))}catch(e){d(e)}}function r(e){try{o(t.throw(e))}catch(e){d(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,r)}o((t=t.apply(e,n||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const d=a(i(0));n.legalEntityPaymentResolver=new Proxy({id:()=>({}),owner:()=>({}),rs:()=>({}),ks:()=>({}),bic:()=>({}),bank:()=>({}),priority:()=>({}),comment:()=>({})},{get:(e,n)=>(e,i,a)=>t(void 0,void 0,void 0,(function*(){const{id:i}=e,t=d.default(a);return(yield t.payments.load(i))[n]}))}),n.default=n.legalEntityPaymentResolver},function(e,n){var i={kind:"Document",definitions:[{kind:"ObjectTypeExtension",name:{kind:"Name",value:"Query"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"legalEntities"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntitiesQuery"}}},directives:[]}]},{kind:"ObjectTypeExtension",name:{kind:"Name",value:"Mutation"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"legalEntities"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntitiesMutation"}}},directives:[]}]},{kind:"EnumTypeDefinition",description:{kind:"StringValue",value:"Possible data to sort of legal entities list",block:!0},name:{kind:"Name",value:"LegalEntityOrderField"},directives:[],values:[{kind:"EnumValueDefinition",name:{kind:"Name",value:"createdAt"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"updatedAt"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"label"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"nameFull"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"nameShort"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"city"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"directorNameNominative"},directives:[]}]},{kind:"EnumTypeDefinition",name:{kind:"Name",value:"LegalEntityPaymentPriority"},directives:[],values:[{kind:"EnumValueDefinition",name:{kind:"Name",value:"master"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"slave"},directives:[]}]},{kind:"ObjectTypeDefinition",description:{kind:"StringValue",value:"legal entities module queries",block:!0},name:{kind:"Name",value:"LegalEntitiesQuery"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",description:{kind:"StringValue",value:"Returns legal entities list bundle",block:!0},name:{kind:"Name",value:"list"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"first"},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"offset"},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"after"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"orderBy"},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityOrderBy"}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"filter"},type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityListFilter"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"search"},type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityFilterSearch"}},directives:[]}],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityListConnection"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"get"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntity"}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"Search data in external resources",block:!0},name:{kind:"Name",value:"externalSearch"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityExternalSearch"}}},directives:[]}]},{kind:"ObjectTypeDefinition",name:{kind:"Name",value:"LegalEntityExternalSearch"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",description:{kind:"StringValue",value:"Search companies in external resources",block:!0},name:{kind:"Name",value:"companies"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"query"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityExternal"}}}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"Search bank details in external resources",block:!0},name:{kind:"Name",value:"payments"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"query"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityPaymentsExternal"}}}},directives:[]}]},{kind:"ObjectTypeDefinition",name:{kind:"Name",value:"LegalEntityExternal"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"label"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"nameFull"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"nameShort"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"address"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"ogrn"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"kpp"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"inn"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"city"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"City"}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"directorNameNominative"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"directorNameShortNominative"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"state"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityExternalStatus"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"branchType"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityExternalBranchType"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"type"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityExternalType"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"registrationDate"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Date"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"liquidationDate"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"Date"}},directives:[]}]},{kind:"EnumTypeDefinition",name:{kind:"Name",value:"LegalEntityExternalStatus"},directives:[],values:[{kind:"EnumValueDefinition",name:{kind:"Name",value:"ACTIVE"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"LIQUIDATING"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"LIQUIDATED"},directives:[]},{kind:"EnumValueDefinition",description:{kind:"StringValue",value:"In the process of joining another legal entity, with subsequent liquidation",block:!0},name:{kind:"Name",value:"REORGANIZING"},directives:[]}]},{kind:"EnumTypeDefinition",name:{kind:"Name",value:"LegalEntityExternalBranchType"},directives:[],values:[{kind:"EnumValueDefinition",name:{kind:"Name",value:"MAIN"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"BRANCH"},directives:[]}]},{kind:"EnumTypeDefinition",name:{kind:"Name",value:"LegalEntityExternalType"},directives:[],values:[{kind:"EnumValueDefinition",name:{kind:"Name",value:"LEGAL"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"INDIVIDUAL"},directives:[]}]},{kind:"ObjectTypeDefinition",name:{kind:"Name",value:"LegalEntityPaymentsExternal"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"ks"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"bic"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"bank"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}]},{kind:"ObjectTypeDefinition",name:{kind:"Name",value:"LegalEntitiesMutation"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",description:{kind:"StringValue",value:"Create legal entity",block:!0},name:{kind:"Name",value:"create"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"input"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityInputCreate"}}},directives:[]}],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntity"}}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"Update legal entity",block:!0},name:{kind:"Name",value:"update"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"input"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityInputUpdate"}}},directives:[]}],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntity"}}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"Delete legal entity",block:!0},name:{kind:"Name",value:"delete"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"ids"},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},directives:[]}],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}]},{kind:"InputObjectTypeDefinition",description:{kind:"StringValue",value:"Possible data to order list of legal entities",block:!0},name:{kind:"Name",value:"LegalEntityOrderBy"},directives:[],fields:[{kind:"InputValueDefinition",name:{kind:"Name",value:"field"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityOrderField"}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"direction"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"OrderDirection"}}},directives:[]}]},{kind:"InputObjectTypeDefinition",description:{kind:"StringValue",value:"Possible data to filter list of legal entities",block:!0},name:{kind:"Name",value:"LegalEntityListFilter"},directives:[],fields:[{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"ogrn"},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"inn"},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"nameShort"},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"city"},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},directives:[]}]},{kind:"EnumTypeDefinition",name:{kind:"Name",value:"LegalEntityFilterSearchField"},directives:[],values:[{kind:"EnumValueDefinition",name:{kind:"Name",value:"label"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"nameFull"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"nameShort"},directives:[]},{kind:"EnumValueDefinition",name:{kind:"Name",value:"directorNameNominative"},directives:[]}]},{kind:"InputObjectTypeDefinition",name:{kind:"Name",value:"LegalEntityFilterSearch"},directives:[],fields:[{kind:"InputValueDefinition",name:{kind:"Name",value:"fields"},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityFilterSearchField"}}}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"query"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}]},{kind:"ObjectTypeDefinition",description:{kind:"StringValue",value:"Legal entity adge bundle",block:!0},name:{kind:"Name",value:"LegalEntityEdge"},interfaces:[{kind:"NamedType",name:{kind:"Name",value:"Edge"}}],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"node"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntity"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"cursor"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}]},{kind:"ObjectTypeDefinition",description:{kind:"StringValue",value:"Legal entities list bundle",block:!0},name:{kind:"Name",value:"LegalEntityListConnection"},interfaces:[{kind:"NamedType",name:{kind:"Name",value:"Connection"}}],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"totalCount"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"pageInfo"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PageInfo"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"edges"},arguments:[],type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityEdge"}}}},directives:[]}]},{kind:"ObjectTypeDefinition",description:{kind:"StringValue",value:"Legal entity data",block:!0},name:{kind:"Name",value:"LegalEntity"},interfaces:[{kind:"NamedType",name:{kind:"Name",value:"Node"}}],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"id"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"createdAt"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DateTime"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"updatedAt"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DateTime"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"label"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"nameFull"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"nameShort"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"address"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"ogrn"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"kpp"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"inn"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"payments"},arguments:[],type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityPayments"}}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"city"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"City"}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"Director name in Nominative case\ne.g. Ivanov Boris Olegovich",block:!0},name:{kind:"Name",value:"directorNameNominative"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"Director name initials in Nominative case\ne.g. Ivanov B. O.",block:!0},name:{kind:"Name",value:"directorNameShortNominative"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"Director name in Genitive case\ne.g. Ivanova Borisa Olegovicha",block:!0},name:{kind:"Name",value:"directorNameGenitive"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"Director name initials on Genitive case\ne.g. Ivanova B. O.",block:!0},name:{kind:"Name",value:"directorNameShortGenitive"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"comment"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"deleted"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}]},{kind:"ObjectTypeDefinition",name:{kind:"Name",value:"LegalEntityPayments"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"id"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"owner"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntity"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"rs"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"ks"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"bic"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"bank"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"FieldDefinition",description:{kind:"StringValue",value:"If the priority is «master» then these payment details are priority and will be used by default\nTry not to allow one legal entity to have multiple «master» priorities",block:!0},name:{kind:"Name",value:"priority"},arguments:[],type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityPaymentPriority"}}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"comment"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}]},{kind:"InputObjectTypeDefinition",name:{kind:"Name",value:"LegalEntityInputPayments"},directives:[],fields:[{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"rs"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"ks"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"bic"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"bank"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"priority"},type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityPaymentPriority"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"comment"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}]},{kind:"InputObjectTypeDefinition",description:{kind:"StringValue",value:"Possible data to legal entity update",block:!0},name:{kind:"Name",value:"LegalEntityInputUpdate"},directives:[],fields:[{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"label"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"nameFull"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"nameShort"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"address"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"ogrn"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"inn"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"kpp"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"payments"},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityInputPayments"}}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"directorNameNominative"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"directorNameGenitive"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"directorNameShortNominative"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"directorNameShortGenitive"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"comment"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"city"},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}]},{kind:"InputObjectTypeDefinition",description:{kind:"StringValue",value:"Possible data to legal entity update",block:!0},name:{kind:"Name",value:"LegalEntityInputCreate"},directives:[],fields:[{kind:"InputValueDefinition",name:{kind:"Name",value:"ogrn"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"inn"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"label"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"nameFull"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"nameShort"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"address"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"kpp"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"payments"},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LegalEntityInputPayments"}}}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"directorNameNominative"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"directorNameGenitive"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"directorNameShortNominative"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"directorNameShortGenitive"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"comment"},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"city"},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}]}],loc:{start:0,end:5060}};i.loc.source={body:'extend type Query {\n  legalEntities: LegalEntitiesQuery!\n}\n\nextend type Mutation {\n  legalEntities: LegalEntitiesMutation!\n}\n\n\n"""\nPossible data to sort of legal entities list\n"""\nenum LegalEntityOrderField {\n  createdAt\n  updatedAt\n  label\n  nameFull\n  nameShort\n  city\n  directorNameNominative\n}\n\nenum LegalEntityPaymentPriority {\n  master\n  slave\n}\n\n"""\nlegal entities module queries\n"""\ntype LegalEntitiesQuery {\n\n  """\n  Returns legal entities list bundle\n  """\n  list(\n    first: Int\n    offset: Int\n    after: String\n    orderBy: [LegalEntityOrderBy]\n    filter: LegalEntityListFilter\n    search: LegalEntityFilterSearch\n  ): LegalEntityListConnection!\n\n  get(id: ID!): LegalEntity\n\n  """\n  Search data in external resources\n  """\n  externalSearch: LegalEntityExternalSearch!\n}\n\ntype LegalEntityExternalSearch {\n  """\n  Search companies in external resources\n  """\n  companies(query: String!): [LegalEntityExternal!]\n\n  """\n  Search bank details in external resources\n  """\n  payments(query: String!): [LegalEntityPaymentsExternal!]\n}\n\ntype LegalEntityExternal {\n  label: String!\n  nameFull: String!\n  nameShort: String!\n  address: String!\n  ogrn: String!\n  kpp: String\n  inn: String!\n  city: City\n  directorNameNominative: String!\n  directorNameShortNominative: String!\n  state: LegalEntityExternalStatus!\n  branchType: LegalEntityExternalBranchType!\n  type: LegalEntityExternalType!\n  registrationDate: Date!\n  liquidationDate: Date\n}\n\nenum LegalEntityExternalStatus {\n  ACTIVE\n  LIQUIDATING\n  LIQUIDATED\n  """\n  In the process of joining another legal entity, with subsequent liquidation\n  """\n  REORGANIZING\n}\n\nenum LegalEntityExternalBranchType {\n  MAIN\n  BRANCH\n}\n\nenum LegalEntityExternalType {\n  LEGAL\n  INDIVIDUAL\n}\n\ntype LegalEntityPaymentsExternal {\n  ks: String!\n  bic: String!\n  bank: String!\n}\n\n\n\n\ntype LegalEntitiesMutation {\n  \n  """\n  Create legal entity\n  """\n  create(\n    input: LegalEntityInputCreate!\n  ): LegalEntity!\n\n  """\n  Update legal entity\n  """\n  update(\n    id: ID!\n    input: LegalEntityInputUpdate!\n  ): LegalEntity!\n\n  """\n  Delete legal entity\n  """\n  delete(\n    id: ID\n    ids: [ID!]\n  ): Boolean!\n  \n}\n\n"""\nPossible data to order list of legal entities\n"""\ninput LegalEntityOrderBy {\n  field: LegalEntityOrderField!\n  direction: OrderDirection!\n}\n\n"""\nPossible data to filter list of legal entities\n"""\ninput LegalEntityListFilter {\n  id: [ID!]\n  ogrn: [String!]\n  inn: [String!]\n  nameShort: [String!]\n  city: [ID!]\n}\n\nenum LegalEntityFilterSearchField {\n  label\n  nameFull\n  nameShort\n  directorNameNominative\n}\n\ninput LegalEntityFilterSearch {\n  fields: [LegalEntityFilterSearchField!]!\n  query: String!\n}\n\n"""\nLegal entity adge bundle\n"""\ntype LegalEntityEdge implements Edge {\n  node: LegalEntity!\n  cursor: String!\n}\n\n"""\nLegal entities list bundle\n"""\ntype LegalEntityListConnection implements Connection {\n  totalCount: Int!\n  pageInfo: PageInfo!\n  edges: [LegalEntityEdge]!\n}\n\n\n"""\nLegal entity data\n"""\ntype LegalEntity implements Node {\n  id: ID!\n  createdAt: DateTime!\n  updatedAt: DateTime!\n  label: String!\n  nameFull: String!\n  nameShort: String!\n  address: String!\n  ogrn: String!\n  kpp: String\n  inn: String!\n  payments: [LegalEntityPayments!]\n  city: City\n\n  """\n  Director name in Nominative case\n  e.g. Ivanov Boris Olegovich\n  """\n  directorNameNominative: String!\n\n  """\n  Director name initials in Nominative case\n  e.g. Ivanov B. O.\n  """\n  directorNameShortNominative: String!\n\n  """\n  Director name in Genitive case\n  e.g. Ivanova Borisa Olegovicha\n  """\n  directorNameGenitive: String!\n\n  """\n  Director name initials on Genitive case\n  e.g. Ivanova B. O.\n  """\n  directorNameShortGenitive: String!\n\n  comment: String\n  deleted: Boolean!\n}\n\n\ntype LegalEntityPayments {\n  id: ID!\n  owner: LegalEntity!\n  rs: String!\n  ks: String!\n  bic: String!\n  bank: String!\n\n  """\n  If the priority is «master» then these payment details are priority and will be used by default\n  Try not to allow one legal entity to have multiple «master» priorities\n  """\n  priority: LegalEntityPaymentPriority!\n  comment: String\n}\n\n\ninput LegalEntityInputPayments {\n  id: ID\n  rs: String\n  ks: String\n  bic: String\n  bank: String\n  priority: LegalEntityPaymentPriority\n  comment: String\n}\n\n"""\nPossible data to legal entity update\n"""\ninput LegalEntityInputUpdate {\n  id: ID\n  label: String\n  nameFull: String\n  nameShort: String\n  address: String\n  ogrn: String\n  inn: String\n  kpp: String\n  payments: [LegalEntityInputPayments!]\n  directorNameNominative: String\n  directorNameGenitive: String\n  directorNameShortNominative: String\n  directorNameShortGenitive: String\n  comment: String\n  city: ID\n}\n\n"""\nPossible data to legal entity update\n"""\ninput LegalEntityInputCreate {\n  ogrn: String!\n  inn: String!\n  id: ID\n  label: String\n  nameFull: String\n  nameShort: String\n  address: String\n  kpp: String\n  payments: [LegalEntityInputPayments!]!\n  directorNameNominative: String\n  directorNameGenitive: String\n  directorNameShortNominative: String\n  directorNameShortGenitive: String\n  comment: String\n  city: ID\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i}]);